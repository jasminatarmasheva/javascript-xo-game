<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XO Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="wrapper">
        <div class="result" id="resultBox"></div>

        <div class="container" id="gameBoard"></div>

        <button class="reset-btn" id="resetBtn">Reset</button>
    </div>

    <script>
        let container = document.querySelector('.container')
        let resultBox = document.querySelector('#resultBox')
        let resetBtn = document.querySelector('#resetBtn')

        let natija = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]

        resetBtn.addEventListener('click', () => {
            Iqbolshoh()
        })

        let isX = true
        let isWin = false
        let winner = ''

        function Iqbolshoh() {
            natija = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
            resultBox.innerHTML = ''

            isX = true
            isWin = false
            winner = ''

            let boxses = document.querySelectorAll('.box')
            boxses.forEach((b) => {
                b.textContent = ''
                b.classList.remove('win-box')
            })
        }

        function Jasmina() {
            let boxes = document.querySelectorAll('.box')

            console.log(natija)

            for (let i = 0; i < 3; i++) {
                if (natija[i][0] == natija[i][1] && natija[i][1] == natija[i][2]) {
                    isWin = true
                    winner = natija[i][0]

                    boxes[i * 3 + 0].classList.add('win-box')
                    boxes[i * 3 + 1].classList.add('win-box')
                    boxes[i * 3 + 2].classList.add('win-box')
                }

                if (natija[0][i] == natija[1][i] && natija[2][i] == natija[0][i]) {
                    isWin = true
                    winner = natija[0][i]

                    boxes[0 * 3 + i].classList.add('win-box')
                    boxes[1 * 3 + i].classList.add('win-box')
                    boxes[2 * 3 + i].classList.add('win-box')
                }
            }

            if (natija[0][0] == natija[1][1] && natija[1][1] == natija[2][2]) {
                isWin = true
                winner = natija[0][0]

                boxes[0].classList.add('win-box')
                boxes[4].classList.add('win-box')
                boxes[8].classList.add('win-box')
            }

            if (natija[0][2] == natija[1][1] && natija[2][0] == natija[0][2]) {
                isWin = true
                winner = natija[0][2]

                boxes[2].classList.add('win-box')
                boxes[4].classList.add('win-box')
                boxes[6].classList.add('win-box')
            }

            if (isWin) {
                resultBox.textContent = `Tabriklaymiz! '${winner}' Yutti!`
            }
        }

        for (let i = 0; i < 3; i++) {
            let row = document.createElement('div')
            row.classList.add('row')

            for (let j = 0; j < 3; j++) {
                let box = document.createElement('div')
                box.classList.add('box')

                box.addEventListener('click', () => {
                    if (box.textContent !== '') {
                        alert('Bu katak bosilgan!')
                    } else if (isWin) {
                        alert('O\'yin tugagan!')
                    }
                    else if (isX) {
                        natija[i][j] = 'X'
                        box.innerHTML = 'X'
                    } else {
                        natija[i][j] = 'O'
                        box.innerHTML = 'O'
                    }

                    isX = !isX
                    Jasmina()
                })

                row.append(box)
            }

            container.append(row)
        }

    </script>
</body>

</html>